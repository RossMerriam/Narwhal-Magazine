---
import { getCollection } from 'astro:content';
import BaseHTML from '@/layouts/BaseHTML.astro';
import { siteConfig } from '@/utils/site.config';

// 1. Fetch all stories from the collection
const allStories = await getCollection('stories');

---

<BaseHTML>
	<article class="container mx-auto p-4">
		<h2 class="text-xl font-semibold mb-4">Latest Stories</h2>
		<div class="grid gap-6">
			<!-- 4. Loop over the latest stories and display them -->
			{allStories.map(story => (
				<div class="story-card">
					<a href={`/stories/${story.slug}/`} class="text-lg font-bold text-blue-600 hover:underline">
						{story.data.title}
					</a>
					<p class="text-gray-600 mt-1">{story.data.description}</p>
				</div>
			))}
		</div>
	</article>
</BaseHTML>